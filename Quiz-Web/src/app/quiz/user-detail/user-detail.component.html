<app-navbar></app-navbar>
<div *ngIf="user" class="container margin-top">
	<ng-container *ngIf="user?.userAnswers">
		<mat-card class="mb-2 user-total">
			<div class="mt-1 mb-1 user-padding" fxLayout="row" fxLayoutAlign="space-around center">
				<h5 class="readonly-label2">
					<span class="font-bold m-right">{{ correctAnswers }}</span> Correct
				</h5>
				<h5 class="readonly-label2">
					<span class="font-bold m-right">{{ wrongAnswers }}</span> Wrong
				</h5>
				<h5 class="readonly-label2">
					<span class="font-bold m-right">{{ user.userAnswers.length }}</span> Questions
				</h5>
			</div>
		</mat-card>
		<mat-card>
			<mat-card-title>
				<span class="user-name">{{ user?.firstName }} {{ user?.lastName }}</span>
				<span class="readonly-label">({{ user?.email }})</span>
			</mat-card-title>
			<div>
				<table mat-table [dataSource]="user?.userAnswers" multiTemplateDataRows>
					<ng-container matColumnDef="question">
						<th mat-header-cell *matHeaderCellDef><strong>Question</strong></th>
						<td mat-cell *matCellDef="let element">{{ element.questionText | capitalizeFirst }}</td>
					</ng-container>

					<ng-container matColumnDef="choice">
						<th mat-header-cell *matHeaderCellDef><strong>Choice</strong></th>
						<td mat-cell *matCellDef="let element">{{ element.optionText | capitalizeFirst }}</td>
					</ng-container>

					<ng-container matColumnDef="correct">
						<th mat-header-cell *matHeaderCellDef><strong>Correct ?</strong></th>
						<td mat-cell *matCellDef="let element">
							<span *ngIf="element.isCorrect"><i class="fa fa-check fa-2x pl-1 label-correct"></i></span>
							<span *ngIf="!element.isCorrect"><i class="fa fa-times fa-2x pl-1 label-wrong"></i></span>
						</td>
					</ng-container>
					<tr mat-header-row *matHeaderRowDef="displayedUserColumns"></tr>
					<tr mat-row *matRowDef="let row; columns: displayedUserColumns"></tr>
				</table>
			</div>
		</mat-card>
	</ng-container>
</div>
